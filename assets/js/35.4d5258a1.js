(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{392:function(e,t,a){"use strict";a.r(t);var n=a(33),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"ir-gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ir-gateway"}},[e._v("#")]),e._v(" IR gateway")]),e._v(" "),a("p",[e._v("There is two methods for finding the IR codes you want to replicate:")]),e._v(" "),a("ol",[a("li",[e._v("Point the remote control to an IR receiver see "),a("a",{attrs:{href:"#receiving-data-from-ir-signal"}},[e._v("Receiving data from IR signal")]),e._v(" & "),a("a",{attrs:{href:"#send-data-by-mqtt-to-convert-it-on-ir-signal"}},[e._v("Send data by MQTT to convert it on IR signal")])]),e._v(" "),a("li",[e._v("Find the code corresponding to your devices with IR global cache database https://irdb.globalcache.com/ see "),a("a",{attrs:{href:"#send-data-by-mqtt-from-global-cach%C3%A9-database-to-convert-it-on-ir-signal"}},[e._v("Send data by MQTT from Global cache database to convert it on IR signal")])])]),e._v(" "),a("p",[e._v("Here is the "),a("a",{attrs:{href:"https://docs.google.com/spreadsheets/d/1rTDZIG8rm0dSf4vP7HdTdM4-aRY1nDWH4jK28_WRwHQ/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer"}},[e._v("List of protocols"),a("OutboundLink")],1),e._v(" supported by OMG, even if your device brand is not in the list you can still use raw IR data or GlobalCache database.")]),e._v(" "),a("h2",{attrs:{id:"receiving-data-from-ir-signal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#receiving-data-from-ir-signal"}},[e._v("#")]),e._v(" Receiving data from IR signal")]),e._v(" "),a("p",[e._v("Subscribe to all the messages with mosquitto or open your MQTT client software:\n"),a("code",[e._v("mosquitto_sub -t +/# -v")]),e._v("\nAnd press your IR remote control in front of the receiver led you should see the following messages for example:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('home/OpenMQTTGateway/IRtoMQTT {"value":875849879,"protocol":7,"protocol_name":SAMSUNG,"bits":32,"raw":"4534,4432,612,518,614,516,616,1618,618,1616,618,512,618,1618,608,524,612,518,616,514,618,512,616,1618,616,1618,618,514,616,1618,616,514,616,514,618,512,616,1618,618,1618,618,514,610,1622,616,514,618,514,614,516,616,1618,618,512,618,512,618,1616,550,580,618,1616,612,1624,618,1616,618"}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("With an hexadecimal value:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{"value":9938405643,"protocol":55,"bits":35,"hex":"0x25060090B","protocol_name":"TECO"}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("To receive big dump of raw data you need first to modify the "),a("a",{attrs:{href:"https://github.com/1technophile/OpenMQTTGateway/blob/091b317660fd201a30e2cd0e15424a13c5a6bd71/config_IR.h#L41",target:"_blank",rel:"noopener noreferrer"}},[e._v("config_IR.h"),a("OutboundLink")],1),e._v(" and uncomment DumpMode true")]),e._v(" "),a("p",[e._v("Unknown protocols are filtered by default, if you want to see the unknown protocols set into "),a("a",{attrs:{href:"https://github.com/1technophile/OpenMQTTGateway/blob/master/config_IR.h",target:"_blank",rel:"noopener noreferrer"}},[e._v("config_IR.h"),a("OutboundLink")],1),e._v(" "),a("code",[e._v("#define pubIRunknownPrtcl true")]),e._v(" instead of false")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://github.com/1technophile/OpenMQTTGateway/blob/master/img/OpenMQTTGateway_serial3.jpg",alt:""}})]),e._v(" "),a("p",[e._v("You can take this code and try to reproduce it with the gateway either by using "),a("a",{attrs:{href:"#send-data-by-mqtt-to-convert-it-on-ir-signal"}},[e._v("decimal value")]),e._v(" or the "),a("a",{attrs:{href:"#send-raw-ir-data-by-mqtt"}},[e._v("raw value")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"send-data-by-mqtt-to-convert-it-on-ir-signal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#send-data-by-mqtt-to-convert-it-on-ir-signal"}},[e._v("#")]),e._v(" Send data by MQTT to convert it on IR signal")]),e._v(" "),a("p",[e._v("With the IR gateway you need to put on the topic the protocol_name you want to use to send the signal, the different protocols implemented are "),a("a",{attrs:{href:"https://github.com/crankyoldgit/IRremoteESP8266/blob/f9d7e5c622670132731e3f9c64d9132128eb320c/src/IRremoteESP8266.h#L299",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("Exhaustive list "),a("a",{attrs:{href:"https://docs.google.com/spreadsheets/d/1_5fQjAixzRtepkykmL-3uN3G5bLfQ0zMajM9OBZ1bx0/edit#gid=1910001295",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("For example if I want to send a command to a sony TV you can use the following command:")]),e._v(" "),a("p",[a("code",[e._v('mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m \'{"value":551489775,"protocol_name":"SONY"}\'')])]),e._v(" "),a("p",[e._v("The code after the -m represent the payload you want to send.")]),e._v(" "),a("p",[e._v("You could alternatively use an hex value:\n"),a("code",[e._v('mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m \'{"hex":"0x25060090B","protocol_name":"TECO"}\'')])]),e._v(" "),a("p",[e._v("If you don’t want to use special parameters for IR just use value key, the protocol per default is NEC")]),e._v(" "),a("p",[a("code",[e._v("mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{\"value\":551489775}'")])]),e._v(" "),a("p",[e._v("NOTE: on arduino Uno most of the protocols are not enable per default due to memory constraints (it is not the case for MEGA), to enable them go to "),a("a",{attrs:{href:"https://github.com/1technophile/OpenMQTTGateway/blob/master/main/User_config.h",target:"_blank",rel:"noopener noreferrer"}},[e._v("user_config.h"),a("OutboundLink")],1),e._v(" and uncomment the #define corresponding the protocols you want:")]),e._v(" "),a("div",{staticClass:"language-C++ line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//#define IR_COOLIX\n//#define IR_Whynter\n//#define IR_LG\n//#define IR_Sony\n//#define IR_DISH\n//#define IR_RC5\n//#define IR_Sharp\n#define IR_SAMSUNG\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("h2",{attrs:{id:"send-data-by-mqtt-from-global-cache-database-to-convert-it-on-ir-signal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#send-data-by-mqtt-from-global-cache-database-to-convert-it-on-ir-signal"}},[e._v("#")]),e._v(" Send data by MQTT from Global Caché database to convert it on IR signal")]),e._v(" "),a("p",[e._v("The website https://irdb.globalcache.com/ contains an important database of IR codes of various devices brand. By registering and asking the code you will receive a code as the example below:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("code1: sendir,1:1,1,38000,1,69,340,169,20,20,20,20,20,64,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,64,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,1544,340,85,20,3663\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Extract this part of the code:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("38000,1,69,340,169,20,20,20,20,20,64,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,64,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,1544,340,85,20,3663\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("and publish it to mqtt with the a subject containing IR_GC:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m \'{"raw":"38000,1,1,171,171,21,64,21,21,21,21,21,21,21,21,21,21,21,21,21,64,21,64,21,21,21,21,21,21,21,21,21,21,21,21,21,64,21,21,21,21,21,21,21,64,21,21,21,21,21,21,21,21,21,64,21,64,21,64,21,21,21,64,21,64,21,64,21,64,21,1114","protocol_name":"IR_GC"}\'\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("You should be able to command your devices without having listened with the IR receiver or if your protocol is unknown by the IRremote library")]),e._v(" "),a("h2",{attrs:{id:"send-data-by-mqtt-with-advanced-ir-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#send-data-by-mqtt-with-advanced-ir-parameters"}},[e._v("#")]),e._v(" Send data by MQTT with advanced IR parameters")]),e._v(" "),a("p",[e._v("IR sending support two advanced parameters; bits length and repeat number.")]),e._v(" "),a("p",[e._v("The example below will send the following advanced parameters bits: 14 and repeat:4 times for a sony protocol:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m \'{"value":551489775,"protocol_name":"NEC","repeat":4,"bits":14}\'\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"send-raw-ir-data-by-mqtt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#send-raw-ir-data-by-mqtt"}},[e._v("#")]),e._v(" Send raw IR data by MQTT")]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[e._v("If you use an arduino UNO enable "),a("code",[e._v("IR_Raw")]),e._v(" by uncommenting the line 129 in user_config.h\n"),a("code",[e._v("#define IR_Raw")]),e._v("\nIf you are using the uno you will have to comment other gateway like ZgatewayRF, ZgatewayBT and ZgatewayIR to keep enough memory")])]),e._v(" "),a("li",[a("p",[e._v("publish your code like below")])])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m \'{"raw":"8850,4450,600,550,550,550,600,1600,600,550,600,500,600,500,600,550,600,500,600,1650,600,1600,600,550,600,1600,600,1650,600,1600,600,1650,600,1600,600,550,600,500,600,550,550,1650,600,500,600,550,600,500,600,550,550,1650,600,1650,550,1650,600,550,550,1650,600,1650,550,1650,600,1650,600","protocol_name":"IR_Raw"}\'\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"repeat-the-ir-signal-openmqttgateway-receive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repeat-the-ir-signal-openmqttgateway-receive"}},[e._v("#")]),e._v(" Repeat the IR signal OpenMQTTGateway receive")]),e._v(" "),a("p",[e._v("So as to repeat the IR signal received by the gateway once set the following parameter to true in "),a("a",{attrs:{href:"https://github.com/1technophile/OpenMQTTGateway/blob/091b317660fd201a30e2cd0e15424a13c5a6bd71/config_IR.h#L37",target:"_blank",rel:"noopener noreferrer"}},[e._v("config_IR.h"),a("OutboundLink")],1),e._v(" "),a("code",[e._v("#define repeatIRwMQTT true")])])])}),[],!1,null,null,null);t.default=o.exports}}]);