<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Boards | OpenMQTTGateway v0.9.5beta</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS & LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.6499b0e5.css" as="style"><link rel="preload" href="/assets/js/app.a7c35229.js" as="script"><link rel="preload" href="/assets/js/2.69b1530e.js" as="script"><link rel="preload" href="/assets/js/13.88b3b119.js" as="script"><link rel="prefetch" href="/assets/js/10.2954b528.js"><link rel="prefetch" href="/assets/js/11.bd73aee9.js"><link rel="prefetch" href="/assets/js/12.39adc539.js"><link rel="prefetch" href="/assets/js/14.acb8520d.js"><link rel="prefetch" href="/assets/js/15.2fb06cad.js"><link rel="prefetch" href="/assets/js/16.a0ffbb8a.js"><link rel="prefetch" href="/assets/js/17.86653563.js"><link rel="prefetch" href="/assets/js/18.4a63a74b.js"><link rel="prefetch" href="/assets/js/19.892b6bc8.js"><link rel="prefetch" href="/assets/js/20.6d082597.js"><link rel="prefetch" href="/assets/js/21.a6d9e86f.js"><link rel="prefetch" href="/assets/js/22.46e0b892.js"><link rel="prefetch" href="/assets/js/23.0493f4d8.js"><link rel="prefetch" href="/assets/js/24.20b8dcca.js"><link rel="prefetch" href="/assets/js/25.c7ed1725.js"><link rel="prefetch" href="/assets/js/26.1186fb2e.js"><link rel="prefetch" href="/assets/js/27.372a5be5.js"><link rel="prefetch" href="/assets/js/28.35cb028f.js"><link rel="prefetch" href="/assets/js/29.e5a554fa.js"><link rel="prefetch" href="/assets/js/3.ceea2414.js"><link rel="prefetch" href="/assets/js/30.039e1887.js"><link rel="prefetch" href="/assets/js/31.e9c0e40f.js"><link rel="prefetch" href="/assets/js/32.582a23a6.js"><link rel="prefetch" href="/assets/js/33.f3ec4b43.js"><link rel="prefetch" href="/assets/js/34.eecc136d.js"><link rel="prefetch" href="/assets/js/35.89badaad.js"><link rel="prefetch" href="/assets/js/36.1ad3d0cc.js"><link rel="prefetch" href="/assets/js/37.cb1bc031.js"><link rel="prefetch" href="/assets/js/38.f9f93b62.js"><link rel="prefetch" href="/assets/js/39.d6648054.js"><link rel="prefetch" href="/assets/js/4.4d2036be.js"><link rel="prefetch" href="/assets/js/40.f6e1aa0a.js"><link rel="prefetch" href="/assets/js/41.ca026c57.js"><link rel="prefetch" href="/assets/js/5.d2592bb7.js"><link rel="prefetch" href="/assets/js/6.0cc19b70.js"><link rel="prefetch" href="/assets/js/7.bc6f90bc.js"><link rel="prefetch" href="/assets/js/8.4e34aa76.js"><link rel="prefetch" href="/assets/js/9.6f60219e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6499b0e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway v0.9.5beta</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Devices
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Boards
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Devices
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Boards
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for üè†</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisitesüß≠</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up üî®</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ‚û°Ô∏è</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>4 - Use ‚úàÔ∏è</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/use/rf.html" class="sidebar-link">RF gateways  (433mhz/315mhz)</a></li><li><a href="/use/ble.html" class="sidebar-link">BLE gateway</a></li><li><a href="/use/ir.html" class="sidebar-link">IR gateway</a></li><li><a href="/use/lora.html" class="sidebar-link">LORA gateway</a></li><li><a href="/use/gsm.html" class="sidebar-link">GSM 2G gateway</a></li><li><a href="/use/rfm69.html" class="sidebar-link">RFM69 gateway</a></li><li><a href="/use/sensors.html" class="sidebar-link">Sensors</a></li><li><a href="/use/actuators.html" class="sidebar-link">Actuators</a></li><li><a href="/use/boards.html" aria-current="page" class="active sidebar-link">Boards</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/use/boards.html#esp" class="sidebar-link">ESP</a></li><li class="sidebar-sub-header"><a href="/use/boards.html#m5stick-c-or-m5stack" class="sidebar-link">M5Stick C or M5Stack</a></li></ul></li><li><a href="/use/gateway.html" class="sidebar-link">System commands (ESP only)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5 - Integrate üéâ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate üíª</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="boards"><a href="#boards" class="header-anchor">#</a> Boards</h1> <h2 id="esp"><a href="#esp" class="header-anchor">#</a> ESP</h2> <h3 id="erasing-the-flash"><a href="#erasing-the-flash" class="header-anchor">#</a> Erasing the flash</h3> <p>So as to erase the flash memory on ESP boards you may do a long press to TRIGGER_GPIO button or connect the pin to the ground.</p> <h3 id="low-power-mode-for-esp32"><a href="#low-power-mode-for-esp32" class="header-anchor">#</a> Low power mode for ESP32</h3> <p>OpenMQTTGateway support a low power mode for ESP32, this mode can be set by MQTT on a barebone ESP32:</p> <ul><li>Normal mode (per default)</li></ul> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoBT/config&quot; -m '{&quot;low_power_mode&quot;:0}'</code></p> <ul><li>Low Power mode</li></ul> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoBT/config&quot; -m '{&quot;low_power_mode&quot;:2}'</code></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>When coming back from mode 2 to mode 0 you may publish the command with a retain flag so as to enable the gateway to retrieve it when reconnecting.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If you change the default low power mode in config_BT.h to 2 and your credential are not set or not correct, the ESP32 will not connect to the broker and the only way to change the low power mode will be a new erase/upload.</p></div> <h2 id="m5stick-c-or-m5stack"><a href="#m5stick-c-or-m5stack" class="header-anchor">#</a> M5Stick C or M5Stack</h2> <h3 id="behaviour"><a href="#behaviour" class="header-anchor">#</a> Behaviour</h3> <p>If the connexion of the board to WIFI and MQTT is successfull you will see the logo with text like below:</p> <p><img src="/assets/img/OpenMQTTgateway_M5_Stack_Board_Display_Text.b2457906.png" alt="boards"></p> <p>The same behaviour apply to M5 Stick C</p> <p><img src="/assets/img/OpenMQTTgateway_M5_StickC_Board_Display_Text.7c5c1d9b.png" alt="boards"></p> <h3 id="setting-the-log-output"><a href="#setting-the-log-output" class="header-anchor">#</a> Setting the log output</h3> <p>Per default the log of the M5 boards is going to the LCD display with Errors and Warnings only, if you want to change the ouput at build time you can do it in <a href="https://github.com/1technophile/OpenMQTTGateway/blob/development/main/config_M5.h" target="_blank" rel="noopener noreferrer">config_M5.h<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>You can also change it by MQTT. For example if you want to set to LCD</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoM5/config -m '{&quot;log-display&quot;:true}'</code></p> <p>you can also revert it to the serial monitor:</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoM5/config -m '{&quot;log-display&quot;:false}'</code></p> <h3 id="low-power-mode-for-m5-boards"><a href="#low-power-mode-for-m5-boards" class="header-anchor">#</a> Low power mode for M5 boards</h3> <p>OpenMQTTGateway support a low power mode for ESP32, this mode can be set by MQTT or a button on M5 boards:</p> <ul><li>Normal mode (per default), screen ON</li></ul> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoBT/config&quot; -m '{&quot;low_power_mode&quot;:0}'</code></p> <ul><li>Low Power mode, screen ON when processing only</li></ul> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoBT/config&quot; -m '{&quot;low_power_mode&quot;:1}'</code></p> <ul><li>Low Power mode, screen OFF, LED ON when processing on M5StickC</li></ul> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoBT/config&quot; -m '{&quot;low_power_mode&quot;:2}'</code></p> <p>The low power mode can be changed also with a push to button B when the board is processing (top button on M5stickC and middle button of M5stack).</p> <h3 id="erasing-the-flash-2"><a href="#erasing-the-flash-2" class="header-anchor">#</a> Erasing the flash</h3> <p>So as to erase the flash memory on M5Stack boards you may do a long press to TRIGGER_GPIO button:</p> <ul><li>Button B on M5StickC (GPIO 37)</li> <li>Button C on M5Stack (GPIO 37)</li> <li>Button lateral on M5stick (GPIO 35)</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/use/boards.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/9/2020, 11:07:58 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/use/actuators.html" class="prev">
        Actuators
      </a></span> <span class="next"><a href="/use/gateway.html">
        System commands (ESP only)
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a7c35229.js" defer></script><script src="/assets/js/2.69b1530e.js" defer></script><script src="/assets/js/13.88b3b119.js" defer></script>
  </body>
</html>
